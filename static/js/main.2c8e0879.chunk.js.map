{"version":3,"sources":["store.js","components/header/index.js","components/header/header.js","components/book-list-item/index.js","components/book-list-item/book-list-item.js","components/bookstore-service-context/book-service-context.js","components/hoc/with-book-store-service.js","actions/index.js","components/spinner/index.js","components/spinner/spinner.js","components/error-indicator/error-indicator.js","components/book-list/book-list.js","components/book-list/index.js","components/shopping-cart-table/index.js","components/pages/home-page/index.js","components/pages/home-page/home-page.js","components/pages/card-page/index.js","components/pages/card-page/card-page.js","components/app/index.js","components/app/app.js","components/error-boundry/index.js","components/error-boundry/error-boundry.js","reducers/update-book-list.js","reducers/update-shopping-cart.js","reducers/index.js","index.js","services/bookstore-service.js"],"names":["timeout","ShopHeader","_ref","numItems","total","react_default","a","createElement","className","react_router_dom","to","BookListItem","book","onAddedToCart","title","author","price","coverImage","src","alt","onClick","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookStoreService","Wrapped","props","bookstoreService","Object","assign","booksLoaded","newBooks","type","payload","booksError","error","bookAddedToCart","bookId","fetchBooks","dispatch","getBooks","then","data","catch","err","Spinner","ErrorIndicator","Component","BookList","books","map","key","id","components_book_list_item","BookListContainer","this","_this$props","loading","components_spinner","book_list_BookList","withBookstoreService","connect","_ref2","_ref2$bookList","bookList","_ref3","bindActionCreators","mapDispatchToProps","onIncrease","onDecrease","onDelete","_ref2$shoppingCart","shoppingCart","items","cartItems","orderTotal","item","idx","count","HomePage","components_book_list","components_shopping_cart_table","CardPage","App","role","components_header","react_router","path","exact","component","ErrorBoundry","state","hasError","setState","children","updateBookList","action","undefined","updateCartItems","concat","toConsumableArray","slice","updateOrder","quantity","find","itemIndex","findIndex","newItem","arguments","length","_item$id","_item$title","_item$count","_item$total","updateCartItem","console","log","updateShoppingCart","reducer","store","createStore","applyMiddleware","thunkMiddleware","next","setTimeout","Promise","resolve","reject","_this","Error","getBook","ReactDOM","render","es","error_boundry","value","components_app","document","getElementById"],"mappings":"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","file":"static/js/main.2c8e0879.chunk.js","sourcesContent":["import {createStore, applyMiddleware} from 'redux';\r\nimport reducer from './reducers';\r\nimport thunkMiddleware from 'redux-thunk';\r\n\r\nconst logMiddleware = (/*тут можна передати store*/)=>(next)=>action=>{\r\n    console.log(action.type);\r\n    return next(action);\r\n};\r\n\r\n\r\nconst stringMiddleware = ()=>(next)=>action=>{\r\n\r\n        if (typeof action === 'string'){\r\n            return next({type:action})\r\n        }\r\n        return next(action);\r\n\r\n    return store;\r\n};\r\n\r\n\r\n\r\nconst store = createStore(reducer, applyMiddleware(thunkMiddleware,stringMiddleware, logMiddleware));\r\n\r\nconst delayedActionCreator = (timeout) => (dispatch)=>{\r\n    setTimeout(()=>dispatch({type:'DELETE_ACTION'}), timeout)\r\n};\r\n\r\nstore.dispatch(delayedActionCreator(3000));\r\n\r\n//спочатку пи викликаємо store.dispatch(hello world)\r\n//дія перехвачується applyMiddleware\r\n//ф-ція починає викликати кожну функцію middleware\r\n//по черці передавання функцій\r\n//enhancer змінює createStore, middleware змінює якусь функцію в store\r\n//стор не змінюється\r\n\r\nexport default store;\r\n","import ShopHeader from './header';\r\nexport default ShopHeader;\r\n","import React from 'react';\r\nimport './header.css';\r\nimport {Link} from 'react-router-dom'\r\nconst ShopHeader = ({numItems, total}) =>{\r\n    return(\r\n        <header className=\"shop-header row\">\r\n            <Link to=\"/\" className=\"logo text-dark\">ReStore</Link>\r\n            <Link to=\"/cart\" className=\"shopping-cart\">\r\n                <i className=\"cart-icon fa fa-shopping-cart\" />\r\n                {numItems} items (${total})\r\n            </Link>\r\n        </header>\r\n    );\r\n}\r\nexport default ShopHeader;\r\n","import BookListItem from './book-list-item';\r\n\r\nexport default BookListItem;\r\n","import React from 'react';\r\nimport './book-list-item.css';\r\n\r\nconst BookListItem= ({book, onAddedToCart}) =>{\r\n    const {title, author, price, coverImage} = book;\r\n    return(\r\n        <div className=\"book-list-item\">\r\n            <div className=\"book-cover\">\r\n                <img src={coverImage} alt=\"cover\" />\r\n            </div>\r\n            <div className=\"book-details\">\r\n                <span className=\"book-title\">{title}</span>\r\n                <div className=\"book-author\">{author}</div>\r\n                <div className=\"book-price\">${price}</div>\r\n                <button\r\n                    onClick={onAddedToCart}\r\n                    className=\"btn btn-info add-to-card\">\r\n                    Add to cart\r\n                </button>\r\n            </div>\r\n\r\n        </div>\r\n    );\r\n};\r\nexport default BookListItem;\r\n","import React from 'react';\r\n\r\nconst {\r\n    Provider: BookstoreServiceProvider,\r\n    Consumer: BookstoreServiceConsumer\r\n} = React.createContext();\r\n\r\nexport {\r\n    BookstoreServiceProvider,\r\n    BookstoreServiceConsumer\r\n}\r\n","import React from 'react';\r\nimport {BookstoreServiceConsumer} from \"../bookstore-service-context\";\r\n\r\nconst withBookStoreService = () => (Wrapped) =>{\r\n    return (props)=>{\r\n        return(\r\n        <BookstoreServiceConsumer>\r\n            {\r\n                (bookstoreService)=>{\r\n                    return(\r\n                        <Wrapped\r\n                            {...props}\r\n                            bookstoreService={bookstoreService} />\r\n                    );\r\n                }\r\n            }\r\n        </BookstoreServiceConsumer>);\r\n    }\r\n};\r\n    export default withBookStoreService;\r\n","const booksLoaded = (newBooks) =>{\r\n    return{\r\n        type: 'FETCH_BOOKS_SUCCESS',\r\n        payload: newBooks\r\n    }\r\n};\r\nconst booksRequest = () =>{\r\n    return{\r\n        type: 'FETCH_BOOKS_REQUEST'\r\n    }\r\n};\r\nconst booksError = (error) =>{\r\n    return{\r\n        type: 'FETCH_BOOKS_FAILURE',\r\n        payload: error\r\n    }\r\n};\r\nconst bookIncrease = (id) =>{\r\n\r\n    return{\r\n        type: 'BOOK_COUNT_INCREASED',\r\n        payload: id\r\n    }\r\n};\r\nconst bookDecrease = (id) =>{\r\n\r\n    return{\r\n        type: 'BOOK_COUNT_DECREASED',\r\n        payload: id\r\n    }\r\n};\r\nconst bookRemovedFromCart = (id) =>{\r\n    return{\r\n        type: 'BOOK_REMOVED_FROM_CART',\r\n        payload: id\r\n    }\r\n};\r\nconst allBookRemovedFromCart = (id) =>{\r\n    return{\r\n        type: 'ALL_BOOKS_REMOVED_FROM_CART',\r\n        payload: id\r\n    }\r\n};\r\nconst bookAddedToCart = (bookId) =>{\r\n    return {\r\n        type:'BOOK_ADDED_TO_CART',\r\n        payload: bookId\r\n    }\r\n};\r\n\r\nconst fetchBooksOld =(bookstoreService, dispatch) => () =>{\r\n    dispatch(booksRequest());\r\n    bookstoreService.getBooks()\r\n        .then((data)=>{\r\n            //dispatch action to store\r\n            dispatch(booksLoaded(data));\r\n        }).catch((err)=>dispatch(booksError(err)));\r\n};\r\n\r\nconst fetchBooks = (bookstoreService)=> () =>(dispatch)=>{\r\n    dispatch(booksRequest());\r\n    bookstoreService.getBooks()\r\n        .then((data)=>{\r\n            //dispatch action to store\r\n            dispatch(booksLoaded(data));})\r\n        .catch((err)=>dispatch(booksError(err)));\r\n};\r\n\r\nexport { fetchBooks, bookAddedToCart,bookIncrease,bookRemovedFromCart,allBookRemovedFromCart };\r\n","import Spinner from './spinner';\r\nexport default Spinner\r\n","import React from 'react';\r\n\r\nconst Spinner = () =>{\r\n    return(\r\n        <span><h2>Loading...</h2></span>\r\n    );\r\n};\r\nexport default Spinner;\r\n","import React, {Component} from 'react';\r\nimport './error-indeicator.css'\r\nexport default class ErrorIndicator extends Component{\r\n    render() {\r\n        return <div>Error indicator</div>\r\n    }\r\n}\r\n","import React, {Component} from 'react';\r\nimport BookListItem from '../book-list-item';\r\nimport './book-list.css'\r\nimport {connect} from 'react-redux';\r\nimport {withBookstoreService} from '../hoc';\r\nimport { fetchBooks, bookAddedToCart } from \"../../actions\";\r\nimport Spinner from '../spinner'\r\nimport ErrorIndicator from \"../error-indicator/error-indicator\";\r\nimport {bindActionCreators} from \"redux\";\r\n\r\n\r\nconst BookList = ({books, onAddedToCart}) =>{\r\n    return(\r\n        <ul className=\"book-list\">\r\n            {\r\n                books.map((book)=>{\r\n                    return(\r\n                        <li key={book.id}>\r\n                            <BookListItem\r\n                                book={book}\r\n                                onAddedToCart={()=>onAddedToCart(book.id)} />\r\n                        </li>\r\n                    );\r\n                })\r\n            }\r\n        </ul>\r\n    );\r\n};\r\nclass BookListContainer extends Component{\r\n    componentDidMount() {\r\n\r\n        this.props.fetchBooks();\r\n    }\r\n\r\n    render() {\r\n        const {books, loading, error, onAddedToCart} = this.props;\r\n        if (loading){\r\n            return <Spinner />\r\n        }\r\n        if (error){\r\n            return ErrorIndicator\r\n        }\r\n        return(\r\n            <BookList books={books} onAddedToCart={onAddedToCart} />\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = ({bookList: {books, loading, error}})=>{\r\n        return{books, loading, error}\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch, {bookstoreService})=> {\r\n    return bindActionCreators({\r\n        fetchBooks: fetchBooks(bookstoreService),\r\n        onAddedToCart: bookAddedToCart\r\n    }, dispatch)\r\n};\r\nexport default withBookstoreService()(connect(mapStateToProps, mapDispatchToProps)(BookListContainer)) ;\r\n\r\n\r\n","import BookListContainer from './book-list';\r\nexport default BookListContainer;\r\n","import React from 'react';\r\nimport {connect} from \"react-redux\";\r\nimport './shopping-cart-table.css'\r\nimport {bookRemovedFromCart, allBookRemovedFromCart, bookAddedToCart} from \"../../actions\";\r\n\r\n\r\n\r\n\r\nconst ShoppingCartTable = ({items, total, onIncrease,\r\n                           onDecrease, onDelete}) =>{\r\n    const renderRow = (item, idx)=>{\r\n    const {id, title, count, total} = item;\r\n    return(\r\n        <tr key={id}>\r\n            <td>{idx +1}</td>\r\n            <td>{title}</td>\r\n            <td>{count}</td>\r\n            <td>${total}</td>\r\n            <td>\r\n                <button\r\n                    onClick={()=>onDelete(id)}\r\n                    className=\"btn btn-outline-danger\">\r\n                    <i className=\"fa fa-trash-o\" />\r\n                </button>\r\n                <button\r\n                    onClick={()=>onIncrease(id)}\r\n                    className=\"btn btn-outline-success\">\r\n                    <i className=\"fa fa-plus-circle\" />\r\n                </button>\r\n                <button\r\n                    onClick={()=>onDecrease(id)}\r\n                    className=\"btn btn-outline-warning\">\r\n                    <i className=\"fa fa-minus-circle\" />\r\n                </button>\r\n            </td>\r\n        </tr>\r\n    );\r\n}\r\n    return(\r\n        <div className=\"shopping-cart-table\">\r\n            <h2>Your Order</h2>\r\n            <table className=\"table\">\r\n                <thead>\r\n                <tr>\r\n                    <th>N</th>\r\n                    <th>Item</th>\r\n                    <th>Count</th>\r\n                    <th>Price</th>\r\n                    <th>Action</th>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                {\r\n                    items.map(renderRow)\r\n                }\r\n                </tbody>\r\n            </table>\r\n            <div className=\"total\">\r\n            Total: {total}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\nconst mapStateToProps = ({shoppingCart:{cartItems, orderTotal}}) =>{\r\n    return{\r\n        items: cartItems,\r\n        total: orderTotal\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps ={\r\n        onIncrease: bookAddedToCart,\r\n        onDecrease: bookRemovedFromCart,\r\n        onDelete: allBookRemovedFromCart\r\n};\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingCartTable) ;\r\n","import HomePage from './home-page';\r\nexport default HomePage;\r\n","import React from 'react';\r\nimport BookListContainer from \"../../book-list\";\r\nimport ShoppingCartTable from '../../shopping-cart-table'\r\nconst HomePage = () =>{\r\n    return(\r\n        <div>\r\n            <BookListContainer/>\r\n            <ShoppingCartTable />\r\n        </div>\r\n    );\r\n};\r\nexport default HomePage;\r\n","import CardPage from './card-page';\r\nexport default CardPage;\r\n","import React from 'react';\r\n\r\nconst CardPage = () =>{\r\n    return(\r\n        <div>Card Page</div>\r\n    );\r\n};\r\n\r\nexport default CardPage;\r\n","import App from './app';\r\nexport default App\r\n","import React from 'react';\r\nimport './app.css';\r\nimport {Route, Switch} from 'react-router-dom';\r\nimport ShopHeader from '../header';\r\nimport {\r\n    CardPage,\r\n    HomePage\r\n} from '../pages';\r\n\r\n\r\nconst App = () =>{\r\n    return (\r\n        <main role=\"main\" className=\"container\">\r\n            <ShopHeader numItems={5} total={210} />\r\n            <Switch>\r\n                <Route\r\n                    path={\"/\"}\r\n                    exact\r\n                    component={HomePage} />\r\n                <Route\r\n                    path={\"/cart\"}\r\n                    component={CardPage} />\r\n            </Switch>\r\n        </main>\r\n\r\n    );\r\n}\r\nexport default App;\r\n","import ErrorBoundry from './error-boundry';\r\nexport default ErrorBoundry;\r\n","import React, {Component} from 'react';\r\nimport ErrorIndicator from \"../error-indicator/error-indicator\";\r\n\r\nexport default class ErrorBoundry extends Component{\r\n    state={\r\n        hasError: false\r\n    }\r\n    componentDidCatch() {\r\n        this.setState({hasError: true})\r\n    }\r\n    render() {\r\n        if (this.state.hasError){\r\n            return ErrorIndicator\r\n        }\r\n        return this.props.children\r\n    }\r\n}\r\n","\r\nconst updateBookList = (state, action)=>{\r\n    if (state === undefined){\r\n        return{\r\n            books: [],\r\n            loading: true,\r\n            error: null\r\n        }\r\n    }\r\n    switch (action.type) {\r\n        case 'FETCH_BOOKS_REQUEST':\r\n            return{\r\n                books:[],\r\n                error:true,\r\n                loading: true\r\n            };\r\n        case 'FETCH_BOOKS_SUCCESS':\r\n            return{\r\n                books: action.payload,\r\n                loading: false,\r\n                error: null\r\n            };\r\n        case 'FETCH_BOOKS_FAILURE':\r\n            return{\r\n                books:[],\r\n                loading:false,\r\n                error:action.payload\r\n            };\r\n        default:\r\n            return state.bookList;\r\n    }\r\n};\r\n\r\nexport default updateBookList;\r\n","const updateCartItem=(book, item = {}, quantity)=>{\r\n\r\n    const {id=book.id, title = book.title, count=0, total=0} = item;\r\n\r\n    return{\r\n        id,\r\n        title,\r\n        count: count + quantity,\r\n        total: total + quantity*book.price\r\n    };\r\n};\r\nconst updateCartItems = (cartItems, item, idx) =>{\r\n    if (item.count === 0){\r\n        return[...cartItems.slice(0,idx),\r\n            ...cartItems.slice(idx + 1)\r\n        ]\r\n    }\r\n    if (idx === -1){\r\n        return [...cartItems,\r\n            item]\r\n    }\r\n    return[...cartItems.slice(0,idx),\r\n        item, ...cartItems.slice(idx + 1)\r\n    ]\r\n};\r\n\r\nconst updateOrder = (state, bookId, quantity) =>{\r\n\r\n    const {bookList: {books}, shoppingCart:{cartItems}} = state;\r\n\r\n    const book = books.find(({id})=> id === bookId);\r\n    const itemIndex = cartItems.findIndex(({id})=>id === bookId);\r\n    const item = cartItems[itemIndex];\r\n\r\n    const newItem = updateCartItem(book, item, quantity);\r\n    console.log(quantity, newItem.total);\r\n    return{\r\n        orderTotal: quantity*newItem.total,\r\n        cartItems:updateCartItems(cartItems, newItem, itemIndex)\r\n    };\r\n};\r\nconst updateShoppingCart = (state, action)=>{\r\n    if (state === undefined){\r\n        return {\r\n            cartItems: [],\r\n            orderTotal:0\r\n        }\r\n    }\r\n    switch (action.type) {\r\n        case 'BOOK_REMOVED_FROM_CART':\r\n            return updateOrder(state, action.payload, -1);\r\n\r\n        case 'ALL_BOOKS_REMOVED_FROM_CART':\r\n            const item = state.shoppingCart.cartItems.find(({id})=>id === action.payload);\r\n            return updateOrder(state, action.payload, -item.count);\r\n\r\n        case 'BOOK_ADDED_TO_CART':\r\n            return updateOrder(state, action.payload, 1);\r\n        default: return state.shoppingCart\r\n    }\r\n};\r\nexport default updateShoppingCart;\r\n","import updateBookList from './update-book-list';\r\nimport updateShoppingCart from './update-shopping-cart'\r\n\r\nconst reducer = (state, action) =>{\r\n\r\n    return {\r\n        bookList: updateBookList(state, action),\r\n        shoppingCart: updateShoppingCart(state, action)\r\n    }\r\n\r\n};\r\nexport default reducer;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {Provider} from 'react-redux';\nimport {BrowserRouter as Router, Route} from \"react-router-dom\";\n\nimport App from './components/app';\nimport ErrorBoundry from './components/error-boundry';\nimport BookstoreService from './services/bookstore-service';\nimport {BookstoreServiceProvider} from './components/bookstore-service-context';\nimport store from './store';\n\n\nconst bookstoreService = new BookstoreService();\n\n\n\nReactDOM.render(\n    <Provider store={store}>\n        <ErrorBoundry>\n            <BookstoreServiceProvider value={bookstoreService}>\n                <Router >\n                    <App />\n                </Router>\n            </BookstoreServiceProvider>\n        </ErrorBoundry>\n    </Provider>,\n    document.getElementById('root'));\n","\r\nexport default class BookstoreService{\r\n    data = [\r\n    {id:1,\r\n        title:'Production-Ready Microservices',\r\n        author: 'Susan J. Fowler',\r\n        price: 32,\r\n        coverImage:\"https://images-na.ssl-images-amazon.com/images/I/41yJ75gpV-L._SX381_BO1,204,203,200_.jpg\"\r\n    },\r\n    {\r\n        id:2,\r\n        title: 'Release IT',\r\n        author: 'Michael T. Nygard',\r\n        price: 45,\r\n        coverImage:\"https://images-na.ssl-images-amazon.com/images/I/419zAwJJH4L._SX415_BO1,204,203,200_.jpg\"\r\n    }\r\n];\r\n    getBooks = () => {\r\n        return new Promise((resolve, reject)=>{\r\n           setTimeout(()=>{\r\n               resolve(this.data);\r\n               reject(new Error('Error'))}, 700);\r\n        });\r\n    };\r\n    getBook = () =>{\r\n        return true;\r\n    }\r\n}\r\n"],"sourceRoot":""}